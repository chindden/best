â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  Cloudflare Snippets åŸŸåæŸ¥è¯¢å·¥å…· - å®Œæ•´å¥—ä»¶
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Œ é¡¹ç›®æè¿°
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æŸ¥è¯¢ Cloudflare è´¦å·æ‰€æœ‰å·²å¼€é€š Snippets æƒé™çš„åŸŸåã€‚æä¾›ä¸‰ç§ä½¿ç”¨æ–¹å¼ï¼Œ
æ»¡è¶³ä¸åŒç”¨æˆ·éœ€æ±‚ã€‚å®Œå…¨æœ¬åœ°åŒ–è¿è¡Œï¼Œä¸ä¸Šä¼ ä»»ä½•æ•°æ®ã€‚

ğŸš€ å¿«é€Ÿå¼€å§‹ï¼ˆ30ç§’ï¼‰
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. ç™»å½• Cloudflare Dashboard: https://dash.cloudflare.com/
2. æŒ‰ F12 æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·
3. è¿›å…¥ Console æ ‡ç­¾
4. å¤åˆ¶ä¸‹æ–¹çš„å•è¡Œä»£ç ï¼Œç²˜è´´åˆ°æ§åˆ¶å°ï¼ŒæŒ‰ Enterï¼š

(async()=>{let a=[],b=1;for(;true;){const c=await fetch(`/api/v1/zones?per_page=50&page=${b}`,{credentials:'include'}),d=await c.json();if(!d.success)break;a=a.concat(d.result);if(d.result_info.page>=d.result_info.total_pages)break;b++}let e=[];for(const f of a){const g=await fetch(`/api/v1/zones/${f.id}/subscription`,{credentials:'include'}),h=await g.json();if(h.success&&h.result.component_values?.snippets>0){e.push({domain:f.name,snippets:h.result.component_values.snippets,zoneId:f.id})}await new Promise(i=>setTimeout(i,100))}console.log('%câœ… æŸ¥è¯¢å®Œæˆï¼å·²å¼€é€šSnippetsçš„åŸŸå:','color:#00aa00;font-weight:bold;font-size:14px');console.table(e);window.cfSnippets=e;})();

âœ… å®Œæˆï¼ç»“æœä»¥è¡¨æ ¼æ˜¾ç¤º


ğŸ“‚ æ–‡ä»¶è¯´æ˜
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æ ¸å¿ƒå·¥å…·ï¼ˆé€‰ä¸€ä¸ªä½¿ç”¨ï¼‰ï¼š
  â€¢ cf-snippets-domains.js
    - å®Œæ•´åŠŸèƒ½ç‰ˆæœ¬ï¼ˆæ¨èæ–°æ‰‹ï¼‰
    - å¤åˆ¶åˆ°æ§åˆ¶å°è¿è¡Œ
    - è¯¦ç»†è¿›åº¦æ—¥å¿—å’Œé”™è¯¯æç¤º
    - æ–‡ä»¶å¤§å°ï¼š6.5K

  â€¢ cf-snippets-domains-bookmarklet.js
    - æµè§ˆå™¨ä¹¦ç­¾ç‰ˆæœ¬ï¼ˆæ¨èé«˜é¢‘ï¼‰
    - å‹ç¼©ä¼˜åŒ–ï¼Œä¸€é”®æ‰§è¡Œ
    - ä½œä¸ºä¹¦ç­¾ä¿å­˜åç›´æ¥ç‚¹å‡»ä½¿ç”¨
    - æ–‡ä»¶å¤§å°ï¼š3.8K

  â€¢ cf-snippets-domains-tool.html
    - Webå¯è§†åŒ–ç•Œé¢ï¼ˆæ¨èå°ç™½ï¼‰
    - åœ¨æµè§ˆå™¨ä¸­ç›´æ¥æ‰“å¼€
    - æ”¯æŒå¯¼å‡ºæ•°æ®ä¸º TXT/JSON
    - æ–‡ä»¶å¤§å°ï¼š19K

ä½¿ç”¨æ–‡æ¡£ï¼ˆæŒ‰éœ€æŸ¥çœ‹ï¼‰ï¼š
  â€¢ INDEX-CF-SNIPPETS.md
    - ğŸ“– å¯¼èˆªç´¢å¼•ï¼Œå¿«é€Ÿå®šä½æ‰€éœ€å·¥å…·
    - æ¨èé¦–å…ˆæŸ¥çœ‹æ­¤æ–‡ä»¶

  â€¢ CF-SNIPPETS-QUICK-START.md
    - ğŸ“– å¿«é€Ÿå¼€å§‹æŒ‡å—
    - åŒ…å«30ç§’å¿«é€Ÿä¸Šæ‰‹æ–¹å¼
    - æœ€é€‚åˆæ–°æ‰‹

  â€¢ CF-SNIPPETS-QUERY-README.md
    - ğŸ“– å®Œæ•´è¯¦ç»†æ–‡æ¡£
    - æ‰€æœ‰åŠŸèƒ½è¯´æ˜
    - å¸¸è§é—®é¢˜è§£ç­”

  â€¢ SNIPPETS-TOOL-SUMMARY.md
    - ğŸ“– é¡¹ç›®æ€»ç»“æ–‡æ¡£
    - æŠ€æœ¯ç»†èŠ‚è¯´æ˜
    - è¿›é˜¶ä½¿ç”¨æ–¹æ³•

é¡¹ç›®æ–‡ä»¶ï¼š
  â€¢ .gitignore - Git å¿½ç•¥é…ç½®
  â€¢ README-CF-SNIPPETS.txt - æœ¬æ–‡ä»¶


ğŸ¯ ä¸‰ç§ä½¿ç”¨æ–¹å¼å¯¹æ¯”
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ–¹å¼    â”‚ éš¾åº¦    â”‚ é€Ÿåº¦   â”‚ æœ€é€‚åˆ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è„šæœ¬æ–‡ä»¶â”‚ ç®€å•â­   â”‚ æœ€å¿«âš¡ â”‚ æŠ€æœ¯æˆ· â”‚
â”‚ ä¹¦ç­¾    â”‚ ç®€å•â­   â”‚ æœ€å¿«âš¡ â”‚ é«˜é¢‘æˆ· â”‚
â”‚ Webç•Œé¢ â”‚ è¶…ç®€å•â­ â”‚ å¿«âš¡   â”‚ æ™®é€šæˆ· â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜


ğŸ“– æ¨èé˜…è¯»é¡ºåº
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
åˆçº§ç”¨æˆ·ï¼š
  INDEX-CF-SNIPPETS.md
    â†’ CF-SNIPPETS-QUICK-START.md
    â†’ cf-snippets-domains.js (è¿è¡Œ)

ä¸­çº§ç”¨æˆ·ï¼š
  CF-SNIPPETS-QUICK-START.md
    â†’ CF-SNIPPETS-QUERY-README.md
    â†’ cf-snippets-domains-tool.html (ä½¿ç”¨)

é«˜çº§ç”¨æˆ·ï¼š
  SNIPPETS-TOOL-SUMMARY.md
    â†’ å„è„šæœ¬æºä»£ç 
    â†’ è‡ªå®šä¹‰ä¿®æ”¹


âš¡ ä½¿ç”¨åœºæ™¯
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
åœºæ™¯1ï¼šå¿«é€Ÿæ£€æŸ¥çŠ¶æ€
  â†’ ä½¿ç”¨ cf-snippets-domains.jsï¼Œ2åˆ†é’Ÿå†…è·å¾—ç­”æ¡ˆ

åœºæ™¯2ï¼šå¯¼å‡ºåŸŸååˆ—è¡¨
  â†’ ä½¿ç”¨ cf-snippets-domains-tool.htmlï¼Œå¯ç›´æ¥å¯¼å‡º

åœºæ™¯3ï¼šåˆ†äº«å·¥å…·ç»™å›¢é˜Ÿ
  â†’ åˆ†äº« cf-snippets-domains-tool.htmlï¼Œæ— éœ€è®¾ç½®

åœºæ™¯4ï¼šå®šæœŸè‡ªåŠ¨æŸ¥è¯¢
  â†’ ä¿®æ”¹ cf-snippets-domains.jsï¼Œç»“åˆæµè§ˆå™¨è‡ªåŠ¨åŒ–


â“ å¸¸è§é—®é¢˜
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Q: æ€æ ·ä½¿ç”¨ï¼Ÿ
A: æ‰“å¼€ Cloudflare Dashboardï¼ŒæŒ‰ F12 è¿›å…¥æ§åˆ¶å°ï¼Œå¤åˆ¶è„šæœ¬ä»£ç ç²˜è´´è¿è¡Œã€‚

Q: éœ€è¦å¤šé•¿æ—¶é—´ï¼Ÿ
A: çº¦ 5-10 ç§’ï¼ˆå–å†³äºåŸŸåæ•°é‡ï¼Œæ¯ä¸ªåŸŸåçº¦100msï¼‰

Q: éœ€è¦ API Token å—ï¼Ÿ
A: ä¸éœ€è¦ã€‚ä½¿ç”¨æµè§ˆå™¨ç°æœ‰ Sessionï¼Œå·²ç™»å½•å³å¯ã€‚

Q: ä¼šä¿®æ”¹æˆ‘çš„æ•°æ®å—ï¼Ÿ
A: ä¸ä¼šã€‚è„šæœ¬åªæ‰§è¡Œè¯»æ“ä½œï¼Œä¸åšä»»ä½•ä¿®æ”¹ã€‚

Q: æ”¯æŒç¦»çº¿ä½¿ç”¨å—ï¼Ÿ
A: ä¸æ”¯æŒã€‚éœ€è¦ç½‘ç»œè¿æ¥è®¿é—® Cloudflare APIã€‚

Q: ä»£ç å®‰å…¨å—ï¼Ÿ
A: å®Œå…¨å®‰å…¨ã€‚ä»£ç å®Œå…¨å¼€æºï¼Œ100% æœ¬åœ°è¿è¡Œï¼Œæ— æ•°æ®ä¸Šä¼ ã€‚


ğŸ” éšç§å’Œå®‰å…¨
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ… 100% æœ¬åœ°è¿è¡Œ    - æ‰€æœ‰æ•°æ®åœ¨æµè§ˆå™¨å¤„ç†
âœ… å®Œå…¨å¼€æº         - ä»£ç å¯è‡ªè¡Œå®¡è®¡
âœ… åªè¯»æ“ä½œ         - ä¸ä¿®æ”¹ä»»ä½•æ•°æ®
âœ… ç°æœ‰è®¤è¯         - ä½¿ç”¨æµè§ˆå™¨ Sessionï¼Œæ— éœ€æä¾›å‡­æ®
âœ… æ— ç¬¬ä¸‰æ–¹ä¾èµ–     - çº¯åŸç”Ÿ JavaScript


ğŸ’¡ å¿«é€Ÿå‘½ä»¤ï¼ˆæŸ¥è¯¢ååœ¨æ§åˆ¶å°ä½¿ç”¨ï¼‰
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// æŸ¥çœ‹æ‰€æœ‰å·²å¼€é€š Snippets çš„åŸŸå
cfSnippetsResult.snippetsEnabledZones

// åªæ˜¾ç¤ºåŸŸååˆ—è¡¨
cfSnippetsResult.snippetsEnabledZones.map(z => z.name)

// è·å–ç‰¹å®šåŸŸåä¿¡æ¯
cfSnippetsResult.snippetsEnabledZones.find(z => z.name === 'example.com')

// ç»Ÿè®¡æ€» Snippets é…é¢
cfSnippetsResult.snippetsEnabledZones.reduce((sum, z) => sum + z.snippets, 0)

// å¤åˆ¶åŸŸååˆ—è¡¨åˆ°å‰ªè´´æ¿
copy(cfSnippetsResult.snippetsEnabledZones.map(z => z.name).join('\n'))

// å¯¼å‡ºä¸º JSON
JSON.stringify(cfSnippetsResult, null, 2)


ğŸ“Š è¾“å‡ºæ•°æ®ç»“æ„
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
cfSnippetsResult = {
  timestamp: "2024-01-15T10:30:00.000Z",
  summary: {
    total: 25,              // æ€»åŸŸåæ•°
    snippetsEnabled: 8,     // å·²å¼€é€šSnippets
    snippetsDisabled: 15,   // æœªå¼€é€šSnippets
    errors: 2               // æ£€æŸ¥å¤±è´¥
  },
  snippetsEnabledZones: [   // å·²å¼€é€šçš„åŸŸååˆ—è¡¨
    {
      name: "example.com",
      zoneId: "abc123...",
      snippets: 5,          // Snippetsé…é¢
      status: "active",
      plan: "Pro"
    },
    ...
  ],
  snippetsDisabledZones: [...],  // æœªå¼€é€šçš„åŸŸå
  errorZones: [...]              // æ£€æŸ¥å¤±è´¥çš„åŸŸå
}


ğŸ”— ç›¸å…³èµ„æº
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
å®˜æ–¹æ–‡æ¡£ï¼š
  â€¢ Cloudflare Snippets: https://developers.cloudflare.com/rules/snippets/
  â€¢ Cloudflare API: https://developers.cloudflare.com/api/
  â€¢ Zone Subscription: https://developers.cloudflare.com/api/operations/zone-subscription-details


ğŸ“‹ æ–‡ä»¶æ£€æŸ¥æ¸…å•
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æ ¸å¿ƒå·¥å…·ï¼š
  âœ… cf-snippets-domains.js              (6.5K)
  âœ… cf-snippets-domains-bookmarklet.js  (3.8K)
  âœ… cf-snippets-domains-tool.html       (19K)

ä½¿ç”¨æ–‡æ¡£ï¼š
  âœ… INDEX-CF-SNIPPETS.md                (å¯¼èˆª)
  âœ… CF-SNIPPETS-QUICK-START.md          (å¿«é€Ÿ)
  âœ… CF-SNIPPETS-QUERY-README.md         (è¯¦ç»†)
  âœ… SNIPPETS-TOOL-SUMMARY.md            (æ€»ç»“)
  âœ… README-CF-SNIPPETS.txt              (æœ¬æ–‡)

é…ç½®æ–‡ä»¶ï¼š
  âœ… .gitignore


ğŸ“ å­¦ä¹ èµ„æº
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
å¿«é€Ÿä¸Šæ‰‹ï¼š
  1. é˜…è¯»æœ¬æ–‡ä»¶çš„"å¿«é€Ÿå¼€å§‹"éƒ¨åˆ†
  2. æ‰“å¼€ CF-SNIPPETS-QUICK-START.md
  3. æŒ‰æ­¥éª¤å¤åˆ¶ä»£ç åˆ°æ§åˆ¶å°è¿è¡Œ

æ·±å…¥å­¦ä¹ ï¼š
  1. é˜…è¯» CF-SNIPPETS-QUERY-README.md
  2. æŸ¥çœ‹ SNIPPETS-TOOL-SUMMARY.md
  3. ç ”ç©¶æºä»£ç å¹¶è‡ªå®šä¹‰ä¿®æ”¹


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ç«‹å³å¼€å§‹ï¼šé€‰æ‹©ä¸€ä¸ªå·¥å…·ï¼ŒæŒ‰ç…§ä¸Šé¢çš„æ­¥éª¤æ“ä½œï¼Œ30ç§’å†…å³å¯æŸ¥è¯¢æ‚¨çš„SnippetsåŸŸåï¼

ç‰ˆæœ¬ï¼š1.0 | æ›´æ–°ï¼š2024-01-15 | è®¸å¯ï¼šMIT License
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
